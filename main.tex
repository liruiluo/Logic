% This LaTeX document needs to be compiled with XeLaTeX.
\documentclass[a4paper,11pt,twoside]{book}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[version=4]{mhchem}
\usepackage{extpfeil}
\usepackage{stmaryrd}
\usepackage{graphicx}
\usepackage[export]{adjustbox}
\graphicspath{ {./images/} }
\usepackage{multirow}
\usepackage{fvextra, csquotes}
\usepackage{xeCJK}
\usepackage{polyglossia}
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{indentfirst}
\usepackage{setspace}
\usepackage{xcolor}

% 添加 biblatex 支持
\usepackage[style=gb7714-2015,backend=biber,language=chinese]{biblatex}
\DeclareLanguageMapping{chinese}{chinese}
\addbibresource{references.bib}

% 添加hyperref包以启用PDF中的可跳转链接
\usepackage[hidelinks,bookmarks=true,bookmarksnumbered=true,colorlinks=true,linkcolor=blue,citecolor=blue]{hyperref}

% 设置页面边距
\geometry{top=2.5cm, bottom=2.5cm, left=2.5cm, right=2.5cm}

% 设置中文字体
\setCJKmainfont{Source Han Sans SC}[
  BoldFont = Source Han Sans SC Bold,
  ItalicFont = Source Han Sans SC,
  BoldItalicFont = Source Han Sans SC Bold
]
\setCJKmonofont{Source Han Sans SC}
\newCJKfontfamily\cnfont{Source Han Sans SC}

% 设置英文字体
\setmainfont{Times New Roman}

% 确保特定中文字符始终使用中文字体
\DeclareTextFontCommand{\textcn}{\cnfont}
\DeclareTextFontCommand{\texten}{\normalfont}

% 设置数学字体
\setmathfont{TeX Gyre Termes Math}

% 简化的标点和符号设置
\punctstyle{kaiming}
\xeCJKsetup{CJKecglue={\hskip 0.15em plus 0.05em minus 0.05em}}

% 确保中文文本和标点符号使用中文字体的命令
\newcommand{\zhtext}[1]{{\cnfont #1}}

% 添加中英文混排支持
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt

% 确保特定中文字符总是使用中文字体
\newcommand{\cn}[1]{{\cnfont #1}}

% 设置页眉页脚样式
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[RE]{\leftmark}
\fancyhead[LO]{\rightmark}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}
\setlength{\headheight}{14.5pt}

% 设置章节标题格式
\titleformat{\chapter}[display]
{\normalfont\bfseries\Huge}
{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{50pt}{40pt}

% 设置节标题格式
\titleformat{\section}
{\normalfont\Large\bfseries}
{\thesection}{1em}{}
\titlespacing*{\section}{0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}

% 设置段落间距和首行缩进
\setlength{\parindent}{2em}
\setlength{\parskip}{1ex}
\onehalfspacing

%New command to display footnote whose markers will always be hidden
\let\svthefootnote\thefootnote
\newcommand\blfootnotetext[1]{%
  \let\thefootnote\relax\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \let\thefootnote\svthefootnote%
}

%Overriding the \footnotetext command to hide the marker if its value is `0`
\let\svfootnotetext\footnotetext
\renewcommand\footnotetext[2][?]{%
  \if\relax#1\relax%
    \ifnum\value{footnote}=0\blfootnotetext{#2}\else\svfootnotetext{#2}\fi%
  \else%
    \if?#1\ifnum\value{footnote}=0\blfootnotetext{#2}\else\svfootnotetext{#2}\fi%
    \else\svfootnotetext[#1]{#2}\fi%
  \fi
}

% 设置目录格式
\renewcommand{\contentsname}{\centerline{\Large\bfseries 目录}}
% \renewcommand{\cftbeforetoctitleskip}{0pt}
% \renewcommand{\cftaftertoctitleskip}{2em}
% \renewcommand{\cftchapdotsep}{\cftdotsep}
% \renewcommand{\cftchapfont}{\bfseries}
% \renewcommand{\cftsecfont}{\normalfont}
% \renewcommand{\cftsubsecfont}{\normalfont\itshape}

\begin{document}

% 标题页
\begin{titlepage}
\centering
\vspace*{2cm}
{\color{black!80}\rule{\textwidth}{1pt}}
\vspace{1.5cm}

{\Huge\bfseries\color{black!90} 逻辑学导论 \par}
\vspace{0.5cm}
{\large\itshape 系统梳理逻辑学基本概念与方法 \par}

\vspace{1.5cm}
{\color{black!80}\rule{\textwidth}{1pt}}
\vspace{2cm}

\begin{minipage}{0.8\textwidth}
\centering
\begin{quotation}
\large\textit{"逻辑将使人们明辨是非，认清谬误，\\
培养批判性思维，提高分析能力。"}
\end{quotation}
\end{minipage}

\vfill

{\large \today \par}
\end{titlepage}

% 前言
\frontmatter
\chapter*{前言}
\input{preface}

% 目录
\tableofcontents
\clearpage

% 正文
\mainmatter

% 第一部分：逻辑与语言
\chapter{逻辑与语言}
\input{part1}
\input{chapter1/1-1 什么是逻辑学.tex}
\input{chapter1/1-2 命题与语句.tex}
\input{chapter1/1-3 论证前提与结论.tex}
\input{chapter1/1-4 论证的分析.tex}
\input{chapter1/1-5 论证的辨识.tex}
\input{chapter1/1-6 论证和说明.tex}
\input{chapter1/1-7 演绎和有效性.tex}
\input{chapter1/1-8 归纳和或然性.tex}
\input{chapter1/1-9 有效性和真实性.tex}
\input{chapter1/1-10 复杂论证性语段.tex}
\input{chapter1/1-11 推理.tex}
% others

% 第二部分
\chapter{语言与交流}
\input{part2}
\input{chapter2/2-1 语言的三种基本功能.tex}
\input{chapter2/2-2 多功能话语.tex}
\input{chapter2/2-3 话语形式.tex}
\input{chapter2/2-4 情感词汇.tex}
\input{chapter2/2-5 一致与歧见的种类.tex}
\input{chapter2/2-6 情感中性语言.tex}

% 第三部分
\chapter{论争与定义}
\input{chapter3/3-1 论争、言辞之争与定义.tex}
\input{chapter3/3-2 定义的类型和论争的解决.tex}
\input{chapter3/3-3 外延和内涵.tex}
\input{chapter3/3-4 外延定义.tex}
\input{chapter3/3-5 内涵定义.tex}
\input{chapter3/3-6 属加种差定义的五条规则.tex}
\input{chapter3/summary}

% 第四部分
\chapter{谬误}
\input{chapter4/4-1 什么是谬误.tex}
\input{chapter4/4-2 相干谬误.tex}
\input{chapter4/4-2-R1 诉诸无知论证.tex}
\input{chapter4/4-2-R2 诉诸不当权威.tex}
\input{chapter4/4-2-R3 人身攻击论证.tex}
\input{chapter4/4-2-R4 诉诸情感.tex}
\input{chapter4/4-2-R5 诉诸同情.tex}
\input{chapter4/4-2-R6 诉诸暴力.tex}
\input{chapter4/4-2-R7 不相干结论.tex}
\input{chapter4/4-3 预设谬误.tex}
\input{chapter4/4-3-P1 复杂问语.tex}
\input{chapter4/4-3-P2 虚假原因.tex}
\input{chapter4/4-3-P3 乞题.tex}
\input{chapter4/4-3-P4-P5 偶然与逆偶然.tex}
\input{chapter4/4-4 含混谬误.tex}
\input{chapter4/4-4-A1 歧义谬误.tex}
\input{chapter4/4-4-A2 双关谬误.tex}
\input{chapter4/4-4-A3 重读谬误.tex}
\input{chapter4/4-4-A4 合成谬误.tex}
\input{chapter4/4-4-A5 分解谬误.tex}
\input{chapter4/summary.tex}

% 第五部分
\chapter{演绎推理}
\input{chapter5/5-1 演绎理论.tex}
\input{chapter5/5-2 直言命题及其类别.tex}
\input{chapter5/5-3 质、量与周延性.tex}
\input{chapter5/5-4 传统对当方阵.tex}
\input{chapter5/5-5 其他直接推论.tex}
\input{chapter5/5-6 存在含义与直言命题的解释.tex}
\input{chapter5/5-7 直言命题的符号系统与图解.tex}
\input{chapter5/summary.tex}

% 第六部分
\chapter{直言三段论}
\input{chapter6/6-1 标准式直言三段论.tex}
\input{chapter6/6-2 三段论论证的形式性质.tex}
\input{chapter6/6-3 检验三段论：文恩图解法.tex}
\input{chapter6/6-4 三段论规则和三段论谬误.tex}
\input{chapter6/6-5 直言三段论的15个有效形式.tex}
\input{chapter6/6-6 直言三段论15个有效形式的演绎推导.tex}
\input{chapter6/summary.tex}

% 第七部分
\chapter{逻辑与语言}
\input{chapter7/7-1 日常语言中的三段论论证.tex}
\input{chapter7/7-2 三段论词项数量的归约.tex}
\input{chapter7/7-3 直言命题的标准化.tex}
\input{chapter7/7-4 协同翻译.tex}
\input{chapter7/7-5 省略三段论（Enthymemes）.tex}
\input{chapter7/7-6 连锁三段论（Sorites）.tex}
\input{chapter7/7-7 析取三段论和假言三段论.tex}
\input{chapter7/7-8 二难推论（The Dilemma）.tex}
\input{chapter7/summary}

% 第八章
\chapter{现代符号逻辑}
\input{chapter8/8-1 现代逻辑的符号语言.tex}
\input{chapter8/8-2 合取、否定和析取符号.tex}
\input{chapter8/8-3 条件陈述与实质蕴涵.tex}
\input{chapter8/8-4 论证形式与论证.tex}
\input{chapter8/8-5 陈述形式与实质等值.tex}
\input{chapter8/8-6 逻辑等价.tex}
\input{chapter8/8-7 实质蕴涵怪论.tex}
\input{chapter8/8-8 三大思想法则.tex}

% 第九章
\chapter{命题逻辑}
\input{chapter9/9-1 有效性的形式证明.tex}
\input{chapter9/9-2 替换规则.tex}
\input{chapter9/9-3 无效性的证明.tex}
\input{chapter9/9-4 不相容性.tex}

% 第十章
\chapter{谓词逻辑}
\input{chapter10/10-1 单称命题.tex}
\input{chapter10/10-2 量化.tex}
\input{chapter10/10-3 传统主谓命题.tex}
\input{chapter10/10-4 有效性证明.tex}
\input{chapter10/10-5 无效性证明.tex}
\input{chapter10/10-6 非三段论推论.tex}

% 第十一章
\chapter{模态逻辑}
\input{chapter11/11-1 类比论证.tex}
\input{chapter11/11-2 类比论证的评价.tex}
\input{chapter11/11-3 通过逻辑类推进行的反驳.tex}

% 第十二章
\chapter{逻辑悖论}
\input{chapter12/12-1 因果连接：基本概念.tex}
\input{chapter12/12-2 密尔方法.tex}
\input{chapter12/12-3 对密尔方法的批评.tex}

% 第十三章
\chapter{非经典逻辑}
\input{chapter13/13-1 科学的价值.tex}
\input{chapter13/13-2 说明：科学的和非科学的.tex}
\input{chapter13/13-3 对科学说明的评价.tex}
\input{chapter13/13-4 科学研究的七个阶段.tex}
\input{chapter13/13-5 实际工作中的科学家：科学研究的模式.tex}
\input{chapter13/13-6 判决性实验和特设性假说.tex}
\input{chapter13/13-7 作为假说的分类.tex}

% 第十四章
\chapter{归纳逻辑}
\input{chapter14/14-1 概率与归纳逻辑.tex}
\input{chapter14/14-2 概率计算.tex}
\input{chapter14/14-3 共同发生的概率.tex}
\input{chapter14/14-4 替代性发生的概率.tex}
\input{chapter14/14-5 期望值.tex}
\input{chapter14/summary.tex}
\input{chapter14/notes.tex}

% 后记部分
\backmatter
\chapter*{参考文献}
\printbibliography

\end{document}